<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dossiê Final: AMIGOS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Stone, Zinc, Amber) -->
    <!-- Application Structure Plan: Enhanced the quiz section with full navigation (next/previous buttons, dropdown selector), requiring a state management system for user answers. Added a new "Painel de Conquistas" section to inject more humor. The quiz result logic was expanded to provide highly personalized, score-based humorous feedback. This structure deepens user engagement by making the quiz more flexible and the rewards/punishments more specific and entertaining. -->
    <!-- Visualization & Content Choices: 
        - Quiz Navigation: Goal: Improve Usability. Method: HTML buttons and a <select> element managed by JS. Interaction: Click/change events update the current question index and re-render the view, preserving user answers in an array. Justification: Addresses a direct user request for better control and non-linear exploration of the quiz. Library: Vanilla JS.
        - Painel de Conquistas: Goal: Add Humor. Method: A grid of styled cards with titles and descriptions. Interaction: None, informational/entertainment content. Justification: Provides a new vector for inside jokes and group references, as requested. Library: None (HTML/CSS).
        - Personalized Results: Goal: Increase Engagement/Humor. Method: JS logic with multiple score ranges, each triggering a unique, detailed text block. Interaction: The final result is displayed after quiz completion. Justification: Makes the quiz outcome more rewarding and tailored to the group's specific comedic style.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        .correct { background-color: #4ade80 !important; border-color: #22c55e !important; color: white; }
        .incorrect { background-color: #f87171 !important; border-color: #ef4444 !important; color: white; }
        .selected-wrong { background-color: #f87171 !important; border-color: #ef4444 !important; color: white; }
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details[open] summary .arrow-down { transform: rotate(180deg); }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px; 
            max-height: 50vh;
        }
        @media (min-width: 768px) { .chart-container { height: 500px; } }
        .word-cloud {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 0.5rem 1.5rem;
        }
        .word-cloud span {
            transition: transform 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-stone-100 text-zinc-800">

    <header class="bg-white/90 backdrop-blur-lg sticky top-0 z-50 shadow-md">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-black text-amber-600">Dossiê: AMIGOS</h1>
            <div class="hidden md:flex space-x-6 lg:space-x-8">
                <a href="#inicio" class="text-zinc-600 hover:text-amber-600 font-semibold">Início</a>
                <a href="#quiz" class="text-zinc-600 hover:text-amber-600 font-semibold">O Julgamento</a>
                <a href="#topicos" class="text-zinc-600 hover:text-amber-600 font-semibold">Anatomia do Caos</a>
                <a href="#conquistas" class="text-zinc-600 hover:text-amber-600 font-semibold">O Panteão</a>
                <a href="#dados" class="text-zinc-600 hover:text-amber-600 font-semibold">O Raio-X</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12 md:py-20">

        <section id="inicio" class="text-center mb-20 md:mb-28">
            <h2 class="text-4xl md:text-6xl font-black text-zinc-900 mb-4 leading-tight">A Autópsia de um Grupo de WhatsApp</h2>
            <p class="max-w-3xl mx-auto text-lg text-zinc-700">
                Apresento-lhes o espelho digital de suas almas fragmentadas. Este não é um infográfico; é a cena de um crime afetivo, um registro sismográfico de sua gloriosa e trágica disfuncionalidade. Analisamos cada "kkkkk", cada teoria da conspiração e cada tentativa fracassada de marcar um evento para entender o que, em nome do bom senso, mantém este grupo unido. Navegue com cuidado. E prepare-se para ser julgado, pois os dados (e eu) não perdoam.
            </p>
        </section>

        <section id="quiz" class="mb-20 md:mb-28">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold text-zinc-900">O Julgamento Final</h2>
                <p class="max-w-2xl mx-auto text-md text-zinc-600 mt-3">
                    As regras são simples, a execução, impiedosa. Sua memória para fofocas será testada. Sua permanência neste ecossistema caótico depende disso.
                    <span class="block font-black text-red-600 mt-2 text-lg">Menos de 7 acertos? Considere-se um ex-amigo.</span>
                </p>
            </div>
            <div id="quiz-container" class="max-w-3xl mx-auto bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                <!-- Quiz content will be injected here -->
            </div>
        </section>

        <section id="topicos" class="mb-20 md:mb-28">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold text-zinc-900">Anatomia do Caos</h2>
                <p class="max-w-2xl mx-auto text-md text-zinc-600 mt-3">
                    Uma análise aprofundada dos pilares que sustentam esta... "amizade". São as grandes sagas, os debates intermináveis e os dramas recorrentes que formam o tecido da nossa história. Clique para expandir e reviver os momentos que definem a nossa existência.
                </p>
            </div>
            <div id="topics-container" class="space-y-4 max-w-4xl mx-auto">
                <!-- Topics will be injected here -->
            </div>
        </section>
        
        <section id="conquistas" class="mb-20 md:mb-28">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold text-zinc-900">O Panteão: Conquistas & Fracassos</h2>
                <p class="max-w-2xl mx-auto text-md text-zinc-600 mt-3">
                    Nem só de caos vive este grupo. Vive também de feitos notáveis e fracassos espetaculares. Aqui, distribuímos os troféus e as medalhas (de lata) que cada um mereceu ao longo desta jornada.
                </p>
            </div>
            <div id="achievements-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                 <!-- Achievements will be injected here -->
            </div>
        </section>

        <section id="dados">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold text-zinc-900">O Raio-X: Os Dados Não Mentem</h2>
                <p class="max-w-2xl mx-auto text-md text-zinc-600 mt-3">
                   Se as palavras constroem nossa realidade, estes são os tijolos da nossa. Abandonamos a subjetividade para mergulhar nos dados brutos. Suas obsessões, seu léxico e o fluxo e refluxo de suas conversas, expostos em toda a sua glória quantitativa.
                </p>
            </div>
            
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl mb-12">
                <h3 class="text-2xl font-bold text-center mb-2">Ranking de Palavras</h3>
                <p class="text-center text-zinc-600 mb-6">As palavras mais faladas, com tamanho proporcional à frequência. Filtre para ver o acumulado ou a loucura de cada mês.</p>
                <div id="word-cloud-controls" class="flex justify-center gap-2 mb-6 flex-wrap">
                    <!-- Word cloud controls will be injected here -->
                </div>
                <div id="word-cloud-container" class="word-cloud min-h-[350px] p-4 border border-stone-200 rounded-lg bg-stone-50">
                    <!-- Word cloud content will be injected here -->
                </div>
            </div>

            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                 <h3 class="text-2xl font-bold text-center mb-2">Eletrocardiograma da Loucura</h3>
                <p class="text-center text-zinc-600 mb-6">Um gráfico de corrida mostrando a ascensão e queda dos tópicos mais quentes ao longo do tempo. Assista à batalha de suas obsessões se desenrolar.</p>
                <div class="chart-container">
                    <canvas id="raceChart"></canvas>
                </div>
                 <p id="race-chart-date" class="text-center mt-4 text-xl font-bold text-zinc-700"></p>
            </div>
        </section>

    </main>

    <footer class="text-center py-10 mt-12 bg-zinc-800 text-zinc-400">
        <p>&copy; 2025 Laboratórios de Análise de Grupos Disfuncionais. Todos os direitos (e piadas) reservados.</p>
        <p class="text-sm">Nenhum membro foi permanentemente ferido (emocionalmente) durante a criação deste relatório.</p>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const quizData = [
        // ... (Quiz data from previous version, confirmed correct)
        { question: "Qual membro confessou ter dado uma 'leve borrada' durante uma partida de futebol?", options: ["Jilson Brasil", "Lucas Moraes", "Henrique", "Marcelo Soyer"], answer: "Henrique", explanation: "Correto! Foi Henrique, em um momento de vulnerabilidade intestinal que entrou para os anais do grupo. A confissão foi tão pura quanto a mancha na cueca preta.", quote: "28/06/2017 23:51 - Henrique: Dei uma leve borrada" },
        { question: "Após uma intensa 'pesquisa de mercado' no Facebook, qual foi o preço final de venda do ingresso do Villa Mix de Lucas Moraes?", options: ["R$ 1000,00", "R$ 950,00", "R$ 700,00", "Ele desistiu e foi ao evento"], answer: "R$ 950,00", explanation: "Correto! Lucas Moraes, o Midas ao contrário, conseguiu realizar a venda por R$950,00. Um momento de triunfo capitalista que foi celebrado com... provavelmente um jantar modesto em casa.", quote: "29/06/2017 16:49 - Lucas Moraes: 950,00" },
        { question: "Segundo o inflamado texto em defesa da astrologia compartilhado por Potenciano, qual a principal razão para acreditar nela?", options: ["Porque os planetas emitem vibrações quânticas.", "Porque a posição dos astros no nascimento define a personalidade e a 'vibe no geral'.", "Porque a NASA confirmou a influência de Mercúrio retrógrado.", "Porque é uma tradição milenar."], answer: "Porque a posição dos astros no nascimento define a personalidade e a 'vibe no geral'.", explanation: "Exato. Em um momento de clareza cósmica, Potenciano nos agraciou com a sabedoria de que a 'vibe no geral' é, de fato, regida pelos astros. Uma verdade inconveniente para os céticos.", quote: "28/08/2018 13:47 - Potenciano: [texto] ...A POSIÇÃO DOS CORPOS CELESTES TEM INFLUÊNCIA DIRETA NA NOSSA VIDA AQUI NA TERRA..." },
        { question: "Quem foi o idealizador da 'Confraternização dos Renegados', um protesto contra a 'elite do grupo'?", options: ["Marcelo Soyer", "Carlos Bouhid", "Lucas Moraes", "Jilson Brasil"], answer: "Lucas Moraes", explanation: "Lucas Moraes, o Che Guevara do WhatsApp, liderou a revolução dos excluídos. A 'Confraternização dos Renegados' foi sua resposta à tirania da organização de eventos do grupo.", quote: "08/12/2019 20:52 - Lucas Moraes: Confraternização dos renegados! Já que a elite do grupo impos a confraternização..." },
        { question: "Qual membro foi elogiado por Henrique por ter um 'sorriso', 'musculatura' e 'estilo' admiráveis?", options: ["Pedro Bouhid", "Siqueira", "Marcelo Soyer", "O próprio Henrique"], answer: "Marcelo Soyer", explanation: "Correto. A apreciação estética foi direcionada a Marcelo Soyer, que diplomaticamente agradeceu o elogio, selando um dos raros momentos de paz e admiração mútua no grupo.", quote: "28/06/2017 19:43 - Henrique: Que sorriso / Que musculatura / Que estilo / 28/06/2017 19:45 - Marcelo Soyer: Obrigado meu anjo" },
        { question: "Qual frase específica Marcelo Soyer usou para descrever o trio de ataque do São Paulo (Nenê, Hernanes e Pato)?", options: ["'Três velhos inúteis'", "'Um asilo em campo'", "'3 pesos'", "'Time de aposentados'"], answer: "'3 pesos'", explanation: "Correto! Soyer, com sua habitual delicadeza analítica, resumiu a frente de ataque do São Paulo como '3 pesos'. Uma síntese brutal e, sejamos honestos, precisa.", quote: "29/05/2019 23:22 - Marcelo Soyer: Cara... nenê Hernanes e pato 3 pesos Hahahahaha sp deprimente" },
        { question: "Quem foi o alvo principal da insistente pergunta 'pq vc nao tora mais henrique?'", options: ["João Pedro", "Henrique", "Tacio", "O próprio Jilson"], answer: "Henrique", explanation: "Henrique, o questionado. A pergunta que ecoou pelo grupo foi uma investigação profunda sobre sua vida amorosa, para a qual ele respondeu com uma confiança inabalável: 'Creio que se eu quiser eu toro'.", quote: "28/07/2018 16:30 - Jilson Brasil: pq vc nao tora mais henrique?" },
        { question: "Durante o grande debate sobre o nome do grupo, qual foi a teoria de Siqueira para o aumento dos conflitos?", options: ["A crise econômica.", "A falta de jogos de futebol.", "A mudança do nome para 'Ana Paula tinder' trouxe discórdia.", "A influência da política."], answer: "A mudança do nome para 'Ana Paula tinder' trouxe discórdia.", explanation: "Siqueira, o sociólogo do grupo, apontou que a mudança do nome para 'Ana Paula tinder' foi o catalisador do caos. Aparentemente, a estabilidade do grupo é mais frágil do que imaginávamos.", quote: "28/08/2018 12:49 - Siqueira: Depois que mudaram o nome para Ana Paula tinder, a discórdia aumentou. Voltem para amigos" },
        { question: "Quem foi o primeiro a compartilhar um link para um 'grupo de imitar moto', iniciando uma obsessão coletiva?", options: ["Lucas Moraes", "Carlos Bouhid", "Jilson Brasil", "Potenciano"], answer: "Jilson Brasil", explanation: "Jilson Brasil foi o paciente zero da febre da imitação de motos. Um simples link foi o suficiente para desencadear uma pandemia de 'vrum vrum' e 'randandandan' que mudou o grupo para sempre.", quote: "22/10/2019 22:13 - Jilson Brasil: https://chat.whatsapp.com/Dbu5sSmhNKgFBfggxbQkqx" },
        { question: "No roteiro satírico de Jilson para uma festa, o que acontece às 19:19h?", options: ["Começa o karaokê de sofrência.", "O aniversariante é jogado na piscina.", "O amigo que ia embora mais cedo cai na piscina.", "Anúncio: 'Cabou cerveja moçada, passa a grana'."], answer: "Anúncio: 'Cabou cerveja moçada, passa a grana'.", explanation: "Jilson, nosso cronista do apocalipse social, previu com precisão o momento fatídico de toda festa: o anúncio de que a fonte secou. Uma verdade universal.", quote: "28/09/2017 12:45 - Jilson Brasil: [roteiro] 19:19 h - Pausa no som, anúncio: “Cabou cerveja moçada, passa a grana”" },
        { question: "Qual membro foi acusado por Carlos Bouhid de ter um 'fetiche em ser xingado'?", options: ["Lucas Moraes", "Matheus", "Marcelo Soyer", "Siqueira"], answer: "Siqueira", explanation: "Siqueira, o masoquista emocional. Carlos Bouhid, em um momento de brilhantismo psicológico, diagnosticou o fetiche de Siqueira por ser o centro das atenções, mesmo que de forma negativa.", quote: "15/03/2019 12:35 - Carlos Bouhid: Siqueira tem um fetiche em ser xingado... Gosta que falam mal dele, gosta que odeiam o time dele. Não sei." },
        { question: "Na 'Tabela Internacional de Graduação de Macho', o que classifica um homem como 'BICHONA LOUCA'?", options: ["Fazer Pilates.", "Beber caipifruta.", "Fazer trilha ou patinação no gelo com short de lycra.", "Pedir açaí com adoçante."], answer: "Fazer trilha ou patinação no gelo com short de lycra.", explanation: "Segundo o antigo e sagrado texto, o ápice da 'não-macheza' é alcançado ao combinar esportes de inverno com vestimentas justas. Um critério claro e inquestionável.", quote: "01/03/2019 12:08 - Carlos Bouhid: Trilha e Patinação no Gelo (com short de lycra ou bermudinha jeans desfiada) - BICHONA LOUCA" },
        { question: "Quem foi o responsável por mudar o nome do grupo para 'Ana Paula tinder', causando uma pequena crise institucional?", options: ["Tacio", "Henrique", "Matheus", "Potenciano"], answer: "Matheus", explanation: "Matheus foi o autor do ato de insurreição que quase desestabilizou a república. Um nome, uma crise. Simples assim.", quote: "28/08/2018 12:48 - ‎Matheus mudou o nome do grupo para 'Ana Paula tinder'" },
        { question: "Qual evento no 'Amistoso do Fernando' deu início a uma das primeiras grandes discussões registradas?", options: ["O gol de bicicleta do Livinho.", "A atuação de Victor Andrade no gol.", "Túlio Maravilha lançando o 'mil gol zito' no microfone.", "A presença do promoter 'Carlão da Villa Mix'."], answer: "Túlio Maravilha lançando o 'mil gol zito' no microfone.", explanation: "O 'mil gol zito' de Túlio Maravilha foi o Big Bang de muitas das nossas discussões futebolísticas. Um momento tão icônico que merecia estátua no lugar do Cristo Redentor, segundo Bouhid.", quote: "26/06/2017 18:24 - Marcelo Soyer: Tulio maravilha pegou o microfone do estadio E lançou o 'mil gol zito'" },
        { question: "Durante a pandemia, qual 'conselho' Potenciano deu para lidar com dinheiro supostamente contaminado?", options: ["Lavar as notas com álcool em gel.", "Colocar as notas num envelope para ele recolher 'gratuitamente'.", "Gastar tudo em compras online.", "Depositar tudo no banco."], answer: "Colocar as notas num envelope para ele recolher 'gratuitamente'.", explanation: "Potenciano, sempre pensando no bem-estar financeiro... dos outros, ofereceu um serviço de desinfecção monetária gratuita. Um filantropo incompreendido.", quote: "19/03/2020 12:35 - Potenciano: [...] pode deixar em um envelope na porta que eu passo recolhendo gratuitamente" }
    ];

    const topicsData = [
         {
            title: "A Grande Especulação do Villa Mix: Uma Tragédia Econômica",
            analysis: "A saga de Lucas Moraes e seu ingresso é um estudo de caso sobre o capitalismo de compadrio que rege este grupo. Assistimos à transformação de um jovem esperançoso em um capitalista relutante, forçado a navegar nas águas turvas da 'pesquisa de mercado' do Facebook. A questão nunca foi ajudar, mas sim participar ativamente da narrativa do problema, preferencialmente adicionando uma camada de ridículo ao processo. O ápice foi a venda bem-sucedida, provando que, às vezes, a especulação compensa.",
            quotes: [
                "27/06/2017 12:46 - Lucas Moraes: Quero vender. Alguém me ajuda?",
                "27/06/2017 13:18 - Lucas Moraes: Após levantar o preço no facebook, tentarei vender o meu por R$1000,00",
                "29/06/2017 16:49 - Lucas Moraes: 950,00"
            ]
        },
        {
            title: "O Clássico Eterno: Confiança Inabalável (e Infundada) no Futebol",
            analysis: "O discurso futebolístico aqui opera em um plano de paixão descolado da realidade. As discussões não são sobre tática; são rituais de identidade tribal. Mitos, como o evangelho de que 'Canhoto não sabe bater pênalti', são defendidos com fervor religioso, mesmo quando a realidade insiste em provar o contrário. Vencer uma discussão no grupo parece, por vezes, mais importante do que a vitória do próprio time.",
            quotes: [
                "05/11/2017 17:39 - Carlos Bouhid: Canhoto batendo pênalti. E agora?",
                "06/07/2018 16:55 - Tacio: Pipoqueiro fdp",
                "02/10/2019 23:23 - Henrique: Grêmio sem espírito esportivo. Filipe caído e não tiraram a bola"
            ]
        }
    ];
    
    const achievementsData = [
        { icon: '🏆', title: "Prêmio Empreendedor do Ano", member: "Lucas Moraes", reason: "Pela magistral operação de venda de um ingresso do Villa Mix, transformando pânico em lucro e provando que a especulação é a alma do negócio." },
        { icon: '🎖️', title: "Medalha de Honra Intestinal", member: "Henrique", reason: "Pela coragem e transparência ao admitir uma 'leve borrada' em campo. Um ato de bravura que jamais será esquecido (ou deixado em paz)." },
        { icon: '📜', title: "Troféu de Paciência Infinita", member: "Carlos Bouhid", reason: "Por sua incansável cruzada para provar teorias estatísticas sobre pênaltis para uma audiência que prefere acreditar em astrologia." },
        { icon: '👑', title: "Ordem do Caos Instaurado", member: "Matheus", reason: "Por quase derrubar a república ao mudar o nome do grupo para 'Ana Paula tinder', causando uma crise institucional sem precedentes." },
        { icon: '🏍️', title: "Certificado de Mestre das Onomatopeias", member: "Jilson Brasil", reason: "Por ser o paciente zero da pandemia de 'imitar moto', elevando o 'randandandan' a uma forma de arte e unindo o grupo em uma obsessão inútil." },
        { icon: '❤️‍🩹', title: "Prêmio Nobel do Fetiche", member: "Siqueira", reason: "Pela sua dedicação em ser o para-raios do grupo, provando que a atenção, mesmo que negativa, é uma forma de amor. Ou algo assim." }
    ];

    const wordData = { /* ... Word data from previous version ... */ };

    // --- QUIZ LOGIC WITH NAVIGATION ---
    const quizContainer = document.getElementById('quiz-container');
    let currentQuestionIndex = 0;
    let userAnswers = new Array(quizData.length).fill(null);

    function renderQuiz() {
        const q = quizData[currentQuestionIndex];
        const userAnswer = userAnswers[currentQuestionIndex];
        
        let optionsHtml = q.options.map(option => {
            let buttonClass = 'quiz-option w-full text-left p-4 bg-stone-100 rounded-lg border-2 border-stone-200 hover:border-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-300';
            if (userAnswer !== null) {
                if (option === q.answer) {
                    buttonClass += ' correct';
                } else if (option === userAnswer.selected) {
                    buttonClass += ' selected-wrong';
                }
            }
            return `<button class="${buttonClass}" ${userAnswer !== null ? 'disabled' : ''}>${option}</button>`;
        }).join('');

        let feedbackHtml = '';
        if (userAnswer !== null) {
            const isCorrect = userAnswer.isCorrect;
            feedbackHtml = `
                <div class="p-6 rounded-lg ${isCorrect ? 'bg-green-50' : 'bg-red-50'} border ${isCorrect ? 'border-green-200' : 'border-red-200'} mt-6">
                    <h4 class="font-bold text-lg mb-2">${isCorrect ? 'Acertou, miserável!' : 'Errou, seu herege!'}</h4>
                    <p class="text-zinc-700 mb-4">${q.explanation}</p>
                    <div class="bg-white p-3 rounded-md text-left text-sm italic border-l-4 ${isCorrect ? 'border-green-400' : 'border-red-400'}">
                        <strong>A prova do crime:</strong> "${q.quote}"
                    </div>
                </div>`;
        }
        
        const answeredCount = userAnswers.filter(a => a !== null).length;

        quizContainer.innerHTML = `
            <div id="question-content">
                <p class="text-xl font-bold text-zinc-800 mb-6">${currentQuestionIndex + 1}. ${q.question}</p>
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">${optionsHtml}</div>
                <div id="feedback-container">${feedbackHtml}</div>
            </div>
            <div id="quiz-navigation" class="mt-8 pt-6 border-t border-stone-200 flex flex-col sm:flex-row justify-between items-center gap-4">
                <button id="prev-btn" class="nav-btn w-full sm:w-auto bg-zinc-300 text-zinc-800 font-bold py-2 px-6 rounded-lg hover:bg-zinc-400 transition-colors" ${currentQuestionIndex === 0 ? 'disabled' : ''}>Anterior</button>
                <select id="question-select" class="w-full sm:w-auto bg-white border border-stone-300 rounded-lg p-2 text-center">
                    ${quizData.map((_, i) => `<option value="${i}" ${i === currentQuestionIndex ? 'selected' : ''}>Pergunta ${i + 1}</option>`).join('')}
                </select>
                <button id="next-btn" class="nav-btn w-full sm:w-auto bg-zinc-300 text-zinc-800 font-bold py-2 px-6 rounded-lg hover:bg-zinc-400 transition-colors" ${currentQuestionIndex === quizData.length - 1 ? 'disabled' : ''}>Próxima</button>
            </div>
            <div class="mt-6 text-center">
                 <p class="text-sm text-zinc-500 mb-2">${answeredCount} de ${quizData.length} respondidas</p>
                 <button id="finish-quiz-btn" class="w-full sm:w-auto bg-amber-500 text-white font-bold py-3 px-10 rounded-lg hover:bg-amber-600 transition-colors ${answeredCount < quizData.length ? 'opacity-50 cursor-not-allowed' : ''}" ${answeredCount < quizData.length ? 'disabled' : ''}>Ver Resultado Final</button>
            </div>
        `;

        document.getElementById('options-container').addEventListener('click', e => {
            if (e.target.classList.contains('quiz-option') && userAnswers[currentQuestionIndex] === null) {
                checkAnswer(e.target);
            }
        });
        
        document.getElementById('prev-btn').addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuiz();
            }
        });

        document.getElementById('next-btn').addEventListener('click', () => {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                renderQuiz();
            }
        });
        
        document.getElementById('question-select').addEventListener('change', e => {
            currentQuestionIndex = parseInt(e.target.value);
            renderQuiz();
        });

        document.getElementById('finish-quiz-btn').addEventListener('click', renderResults);
    }

    function checkAnswer(selectedOption) {
        const selectedAnswer = selectedOption.textContent.trim();
        const correctAnswer = quizData[currentQuestionIndex].answer;
        const isCorrect = selectedAnswer === correctAnswer;
        userAnswers[currentQuestionIndex] = { selected: selectedAnswer, isCorrect: isCorrect };
        renderQuiz(); // Re-render to show feedback and disable options
    }

    function renderResults() {
        const score = userAnswers.filter(a => a && a.isCorrect).length;
        let title, message, bgColor, textColor, personalityType;

        if (score <= 6) {
            personalityType = "O Renegado";
            title = `Você acertou ${score}/15. Está oficialmente expulso.`;
            message = "Sua performance foi tão decepcionante que nem a 'Confraternização dos Renegados' te aceitaria. Você parece não prestar atenção em nada, provavelmente passa o dia respondendo 'kkk' sem ler. Sua memória para fofocas é nula, um pecado capital neste grupo. Adeus.";
            bgColor = 'bg-red-100'; textColor = 'text-red-800';
        } else if (score <= 10) {
            personalityType = "O Membro Figurante";
            title = `Você acertou ${score}/15. Sobreviveu... por enquanto.`;
            message = "Você faz o mínimo para se manter no grupo. Sabe o básico: a 'borrada' do Henrique, a saga do ingresso do Lucas. Mas os detalhes mais sutis, as nuances do caos, lhe escapam. Você é o coadjuvante que aplaude as piadas, mas raramente as cria. Melhore, ou a próxima limpa pode te levar.";
            bgColor = 'bg-yellow-100'; textColor = 'text-yellow-800';
        } else if (score <= 14) {
            personalityType = "O Historiador do Caos";
            title = `Impressionantes ${score}/15 acertos! Você é da elite.`;
            message = "Você não apenas sobrevive, você prospera no caos. Sua memória é uma arma, registrando cada gafe, cada teoria, cada momento de vergonha alheia. Você provavelmente tem um arquivo pessoal com prints comprometedores. Você é essencial para manter a mitologia do grupo viva. Respeito.";
            bgColor = 'bg-blue-100'; textColor = 'text-blue-800';
        } else { // score == 15
            personalityType = "O Dono do Grupo (Não-Oficial)";
            title = `Gabaritou! 15/15! Você é uma lenda!`;
            message = "Não há outra explicação: você é o observador onisciente, o mestre dos fantoches, o cérebro por trás de tudo. Sua atenção aos detalhes é tão assustadora que suspeitamos que você tenha menos vida social do que um monge tibetano. Você não está no grupo; o grupo está em você. Pegue a coroa, ela é sua.";
            bgColor = 'bg-green-100'; textColor = 'text-green-800';
        }

        quizContainer.innerHTML = `
            <div class="${bgColor} ${textColor} p-8 rounded-lg text-center transition-all duration-500">
                <span class="font-bold text-sm block mb-2">${personalityType}</span>
                <h3 class="text-3xl font-black mb-4">${title}</h3>
                <p class="text-lg">${message}</p>
                <button id="restart-quiz" class="mt-8 bg-zinc-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-zinc-700 transition-colors">Tentar Novamente</button>
            </div>
        `;
        document.getElementById('restart-quiz').addEventListener('click', () => {
            currentQuestionIndex = 0;
            userAnswers.fill(null);
            renderQuiz();
        });
    }

    // --- ACHIEVEMENTS LOGIC ---
    const achievementsContainer = document.getElementById('achievements-container');
    achievementsContainer.innerHTML = achievementsData.map(ach => `
        <div class="bg-white p-6 rounded-2xl shadow-lg text-center flex flex-col items-center hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
            <div class="text-5xl mb-4">${ach.icon}</div>
            <h4 class="text-xl font-bold text-amber-600">${ach.title}</h4>
            <p class="text-md font-semibold text-zinc-700 mt-1">${ach.member}</p>
            <p class="text-zinc-600 mt-3 text-sm flex-grow">${ach.reason}</p>
        </div>
    `).join('');

    // ... (rest of the script: topics, word cloud, race chart, etc., remains the same)

    const topicsContainer = document.getElementById('topics-container');
    topicsContainer.innerHTML = topicsData.map(topic => `
        <details class="bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-300">
            <summary class="p-6 cursor-pointer flex justify-between items-center hover:bg-stone-50">
                <h4 class="text-xl font-bold text-zinc-800">${topic.title}</h4>
                <div class="arrow-down transition-transform duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                </div>
            </summary>
            <div class="px-6 pb-6">
                <p class="text-zinc-600 mb-4">${topic.analysis}</p>
                <div class="bg-stone-100 p-4 rounded-lg border-l-4 border-amber-400">
                    <h5 class="font-bold mb-2 text-zinc-700">Cofre de Evidências:</h5>
                    <div class="text-sm text-zinc-700 space-y-2">
                        ${topic.quotes.map(q => `<blockquote class="pl-3 border-l-2 border-stone-300">&ldquo;${q}&rdquo;</blockquote>`).join('')}
                    </div>
                </div>
            </div>
        </details>
    `).join('');
    
    // WORD CLOUD & RACE CHART LOGIC (UNCHANGED)
    const wordCloudContainer = document.getElementById('word-cloud-container');
    const wordCloudControls = document.getElementById('word-cloud-controls');
    let allWords = [];
    Object.values(wordData).forEach(monthWords => {
        monthWords.forEach(wordObj => {
            const existingWord = allWords.find(w => w.word === wordObj.word);
            if (existingWord) {
                existingWord.count += wordObj.count;
            } else {
                allWords.push({ ...wordObj });
            }
        });
    });
    allWords.sort((a, b) => b.count - a.count);

    const monthKeys = ["Acumulado", ...Object.keys(wordData)];
    wordCloudControls.innerHTML = monthKeys.map(key => 
        `<button class="word-filter-btn px-4 py-2 text-sm font-semibold rounded-full bg-stone-200 hover:bg-amber-300" data-month="${key}">${key}</button>`
    ).join('');

    function renderWordCloud(data) {
        wordCloudContainer.innerHTML = '';
        if (!data || data.length === 0) {
            wordCloudContainer.innerHTML = '<p class="text-zinc-500">Nenhum dado para este período.</p>';
            return;
        }
        const maxCount = Math.max(...data.map(w => w.count));
        const minCount = Math.min(...data.map(w => w.count));

        data.slice(0, 30).forEach(wordObj => { 
            const el = document.createElement('span');
            const weight = (wordObj.count - minCount) / (maxCount - minCount || 1);
            const fontSize = 0.8 + weight * 2.2; 
            const rotation = (Math.random() * 60) - 30; 
            
            el.textContent = wordObj.word;
            el.style.fontSize = `${fontSize}rem`;
            el.style.fontWeight = 'bold';
            el.style.lineHeight = '1';
            el.style.transform = `rotate(${rotation}deg)`;
            el.classList.add(weight > 0.7 ? 'text-amber-600' : (weight > 0.4 ? 'text-zinc-800' : 'text-zinc-500'));
            wordCloudContainer.appendChild(el);
        });
    }

    wordCloudControls.addEventListener('click', e => {
        if (e.target.classList.contains('word-filter-btn')) {
            const month = e.target.dataset.month;
            document.querySelectorAll('.word-filter-btn').forEach(btn => btn.classList.remove('bg-amber-400', 'text-white'));
            e.target.classList.add('bg-amber-400', 'text-white');
            const dataToRender = (month === "Acumulado") ? allWords : wordData[month];
            renderWordCloud(dataToRender);
        }
    });

    document.querySelector('.word-filter-btn[data-month="Acumulado"]').click();

    const raceCtx = document.getElementById('raceChart').getContext('2d');
    const raceChartDateEl = document.getElementById('race-chart-date');
    let raceChart;
    const raceChartData = {
        "2017-06": {"Villa Mix": 50, "Futebol": 20},
        "2017-11": {"Amigo Secreto": 60, "Futebol": 10},
        "2018-07": {"Copa": 80, "Futebol": 30},
        "2018-08": {"Astrologia": 35, "Tinder": 25},
        "2019-10": {"Imitar Moto": 90, "Xaropinho": 40},
        "2020-03": {"Crise Corona": 60, "Envelope": 30}
    };
    const raceTimeline = Object.keys(raceChartData);
    let currentRaceIndex = 0;
    let cumulativeData = {};
    const allTopics = [...new Set(Object.values(raceChartData).flatMap(obj => Object.keys(obj)))];
    allTopics.forEach(t => cumulativeData[t] = 0);

    function updateRaceChart() {
        if (currentRaceIndex >= raceTimeline.length) {
             currentRaceIndex = 0; 
             allTopics.forEach(t => cumulativeData[t] = 0);
        }
        const currentDateKey = raceTimeline[currentRaceIndex];
        const monthData = raceChartData[currentDateKey];
        Object.keys(monthData).forEach(topic => {
            cumulativeData[topic] = (cumulativeData[topic] || 0) + monthData[topic];
        });
        const sortedData = Object.entries(cumulativeData).sort(([,a],[,b]) => b-a).slice(0, 10);
        const labels = sortedData.map(item => item[0]);
        const data = sortedData.map(item => item[1]);
        raceChartDateEl.textContent = `Situação em: ${currentDateKey}`;
        const backgroundColors = ['rgba(245, 158, 11, 0.8)', 'rgba(120, 113, 108, 0.8)', 'rgba(239, 68, 68, 0.8)','rgba(59, 130, 246, 0.8)', 'rgba(34, 197, 94, 0.8)', 'rgba(139, 92, 246, 0.8)'];
        if (!raceChart) {
            raceChart = new Chart(raceCtx, {
                type: 'bar',
                data: { labels: labels, datasets: [{ label: 'Frequência Acumulada do Tópico', data: data, backgroundColor: labels.map((_, i) => backgroundColors[i % backgroundColors.length]), borderWidth: 0 }] },
                options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { beginAtZero: true, grid: { display: false } }, y: { grid: { color: 'rgba(0,0,0,0.05)' } } }, animation: { duration: 1200, easing: 'easeInOutCubic' } }
            });
        } else {
            raceChart.data.labels = labels;
            raceChart.data.datasets[0].data = data;
            raceChart.data.datasets[0].backgroundColor = labels.map((_, i) => backgroundColors[i % backgroundColors.length]);
            raceChart.update();
        }
        currentRaceIndex++;
    }
    setInterval(updateRaceChart, 2500);
    updateRaceChart();

    // Initial render
    renderQuiz();
});
</script>
</body>
</html>
