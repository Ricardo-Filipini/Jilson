<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dossi√™ Final: AMIGOS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Stone, Zinc, Amber) -->
    <!-- Application Structure Plan: Enhanced the quiz section with full navigation (next/previous buttons, dropdown selector), requiring a state management system for user answers. Added a new "Painel de Conquistas" section to inject more humor. The quiz result logic was expanded to provide highly personalized, score-based humorous feedback. This structure deepens user engagement by making the quiz more flexible and the rewards/punishments more specific and entertaining. -->
    <!-- Visualization & Content Choices: 
        - Quiz Navigation: Goal: Improve Usability. Method: HTML buttons and a <select> element managed by JS. Interaction: Click/change events update the current question index and re-render the view, preserving user answers in an array. Justification: Addresses a direct user request for better control and non-linear exploration of the quiz. Library: Vanilla JS.
        - Painel de Conquistas: Goal: Add Humor. Method: A grid of styled cards with titles and descriptions. Interaction: None, informational/entertainment content. Justification: Provides a new vector for inside jokes and group references, as requested. Library: None (HTML/CSS).
        - Personalized Results: Goal: Increase Engagement/Humor. Method: JS logic with multiple score ranges, each triggering a unique, detailed text block. Interaction: The final result is displayed after quiz completion. Justification: Makes the quiz outcome more rewarding and tailored to the group's specific comedic style.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        .correct { background-color: #4ade80 !important; border-color: #22c55e !important; color: white; }
        .incorrect { background-color: #f87171 !important; border-color: #ef4444 !important; color: white; }
        .selected-wrong { background-color: #f87171 !important; border-color: #ef4444 !important; color: white; }
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details[open] summary .arrow-down { transform: rotate(180deg); }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px; 
            max-height: 50vh;
        }
        @media (min-width: 768px) { .chart-container { height: 500px; } }
        .word-cloud {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 0.5rem 1.5rem;
        }
        .word-cloud span {
            transition: transform 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-stone-100 text-zinc-800">

    <header class="bg-white/90 backdrop-blur-lg sticky top-0 z-50 shadow-md">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-black text-amber-600">Dossi√™: AMIGOS</h1>
            <div class="hidden md:flex space-x-6 lg:space-x-8">
                <a href="#inicio" class="text-zinc-600 hover:text-amber-600 font-semibold">In√≠cio</a>
                <a href="#quiz" class="text-zinc-600 hover:text-amber-600 font-semibold">O Julgamento</a>
                <a href="#topicos" class="text-zinc-600 hover:text-amber-600 font-semibold">Anatomia do Caos</a>
                <a href="#conquistas" class="text-zinc-600 hover:text-amber-600 font-semibold">O Pante√£o</a>
                <a href="#dados" class="text-zinc-600 hover:text-amber-600 font-semibold">O Raio-X</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12 md:py-20">

        <section id="inicio" class="text-center mb-20 md:mb-28">
            <h2 class="text-4xl md:text-6xl font-black text-zinc-900 mb-4 leading-tight">A Aut√≥psia de um Grupo de WhatsApp</h2>
            <p class="max-w-3xl mx-auto text-lg text-zinc-700">
                Apresento-lhes o espelho digital de suas almas fragmentadas. Este n√£o √© um infogr√°fico; √© a cena de um crime afetivo, um registro sismogr√°fico de sua gloriosa e tr√°gica disfuncionalidade. Analisamos cada "kkkkk", cada teoria da conspira√ß√£o e cada tentativa fracassada de marcar um evento para entender o que, em nome do bom senso, mant√©m este grupo unido. Navegue com cuidado. E prepare-se para ser julgado, pois os dados (e eu) n√£o perdoam.
            </p>
        </section>

        <section id="quiz" class="mb-20 md:mb-28">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold text-zinc-900">O Julgamento Final</h2>
                <p class="max-w-2xl mx-auto text-md text-zinc-600 mt-3">
                    As regras s√£o simples, a execu√ß√£o, impiedosa. Sua mem√≥ria para fofocas ser√° testada. Sua perman√™ncia neste ecossistema ca√≥tico depende disso.
                    <span class="block font-black text-red-600 mt-2 text-lg">Menos de 7 acertos? Considere-se um ex-amigo.</span>
                </p>
            </div>
            <div id="quiz-container" class="max-w-3xl mx-auto bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                <!-- Quiz content will be injected here -->
            </div>
        </section>

        <section id="topicos" class="mb-20 md:mb-28">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold text-zinc-900">Anatomia do Caos</h2>
                <p class="max-w-2xl mx-auto text-md text-zinc-600 mt-3">
                    Uma an√°lise aprofundada dos pilares que sustentam esta... "amizade". S√£o as grandes sagas, os debates intermin√°veis e os dramas recorrentes que formam o tecido da nossa hist√≥ria. Clique para expandir e reviver os momentos que definem a nossa exist√™ncia.
                </p>
            </div>
            <div id="topics-container" class="space-y-4 max-w-4xl mx-auto">
                <!-- Topics will be injected here -->
            </div>
        </section>
        
        <section id="conquistas" class="mb-20 md:mb-28">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold text-zinc-900">O Pante√£o: Conquistas & Fracassos</h2>
                <p class="max-w-2xl mx-auto text-md text-zinc-600 mt-3">
                    Nem s√≥ de caos vive este grupo. Vive tamb√©m de feitos not√°veis e fracassos espetaculares. Aqui, distribu√≠mos os trof√©us e as medalhas (de lata) que cada um mereceu ao longo desta jornada.
                </p>
            </div>
            <div id="achievements-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                 <!-- Achievements will be injected here -->
            </div>
        </section>

        <section id="dados">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold text-zinc-900">O Raio-X: Os Dados N√£o Mentem</h2>
                <p class="max-w-2xl mx-auto text-md text-zinc-600 mt-3">
                   Se as palavras constroem nossa realidade, estes s√£o os tijolos da nossa. Abandonamos a subjetividade para mergulhar nos dados brutos. Suas obsess√µes, seu l√©xico e o fluxo e refluxo de suas conversas, expostos em toda a sua gl√≥ria quantitativa.
                </p>
            </div>
            
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl mb-12">
                <h3 class="text-2xl font-bold text-center mb-2">Ranking de Palavras</h3>
                <p class="text-center text-zinc-600 mb-6">As palavras mais faladas, com tamanho proporcional √† frequ√™ncia. Filtre para ver o acumulado ou a loucura de cada m√™s.</p>
                <div id="word-cloud-controls" class="flex justify-center gap-2 mb-6 flex-wrap">
                    <!-- Word cloud controls will be injected here -->
                </div>
                <div id="word-cloud-container" class="word-cloud min-h-[350px] p-4 border border-stone-200 rounded-lg bg-stone-50">
                    <!-- Word cloud content will be injected here -->
                </div>
            </div>

            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                 <h3 class="text-2xl font-bold text-center mb-2">Eletrocardiograma da Loucura</h3>
                <p class="text-center text-zinc-600 mb-6">Um gr√°fico de corrida mostrando a ascens√£o e queda dos t√≥picos mais quentes ao longo do tempo. Assista √† batalha de suas obsess√µes se desenrolar.</p>
                <div class="chart-container">
                    <canvas id="raceChart"></canvas>
                </div>
                 <p id="race-chart-date" class="text-center mt-4 text-xl font-bold text-zinc-700"></p>
            </div>
        </section>

    </main>

    <footer class="text-center py-10 mt-12 bg-zinc-800 text-zinc-400">
        <p>&copy; 2025 Laborat√≥rios de An√°lise de Grupos Disfuncionais. Todos os direitos (e piadas) reservados.</p>
        <p class="text-sm">Nenhum membro foi permanentemente ferido (emocionalmente) durante a cria√ß√£o deste relat√≥rio.</p>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const quizData = [
        // ... (Quiz data from previous version, confirmed correct)
        { question: "Qual membro confessou ter dado uma 'leve borrada' durante uma partida de futebol?", options: ["Jilson Brasil", "Lucas Moraes", "Henrique", "Marcelo Soyer"], answer: "Henrique", explanation: "Correto! Foi Henrique, em um momento de vulnerabilidade intestinal que entrou para os anais do grupo. A confiss√£o foi t√£o pura quanto a mancha na cueca preta.", quote: "28/06/2017 23:51 - Henrique: Dei uma leve borrada" },
        { question: "Ap√≥s uma intensa 'pesquisa de mercado' no Facebook, qual foi o pre√ßo final de venda do ingresso do Villa Mix de Lucas Moraes?", options: ["R$ 1000,00", "R$ 950,00", "R$ 700,00", "Ele desistiu e foi ao evento"], answer: "R$ 950,00", explanation: "Correto! Lucas Moraes, o Midas ao contr√°rio, conseguiu realizar a venda por R$950,00. Um momento de triunfo capitalista que foi celebrado com... provavelmente um jantar modesto em casa.", quote: "29/06/2017 16:49 - Lucas Moraes: 950,00" },
        { question: "Segundo o inflamado texto em defesa da astrologia compartilhado por Potenciano, qual a principal raz√£o para acreditar nela?", options: ["Porque os planetas emitem vibra√ß√µes qu√¢nticas.", "Porque a posi√ß√£o dos astros no nascimento define a personalidade e a 'vibe no geral'.", "Porque a NASA confirmou a influ√™ncia de Merc√∫rio retr√≥grado.", "Porque √© uma tradi√ß√£o milenar."], answer: "Porque a posi√ß√£o dos astros no nascimento define a personalidade e a 'vibe no geral'.", explanation: "Exato. Em um momento de clareza c√≥smica, Potenciano nos agraciou com a sabedoria de que a 'vibe no geral' √©, de fato, regida pelos astros. Uma verdade inconveniente para os c√©ticos.", quote: "28/08/2018 13:47 - Potenciano: [texto] ...A POSI√á√ÉO DOS CORPOS CELESTES TEM INFLU√äNCIA DIRETA NA NOSSA VIDA AQUI NA TERRA..." },
        { question: "Quem foi o idealizador da 'Confraterniza√ß√£o dos Renegados', um protesto contra a 'elite do grupo'?", options: ["Marcelo Soyer", "Carlos Bouhid", "Lucas Moraes", "Jilson Brasil"], answer: "Lucas Moraes", explanation: "Lucas Moraes, o Che Guevara do WhatsApp, liderou a revolu√ß√£o dos exclu√≠dos. A 'Confraterniza√ß√£o dos Renegados' foi sua resposta √† tirania da organiza√ß√£o de eventos do grupo.", quote: "08/12/2019 20:52 - Lucas Moraes: Confraterniza√ß√£o dos renegados! J√° que a elite do grupo impos a confraterniza√ß√£o..." },
        { question: "Qual membro foi elogiado por Henrique por ter um 'sorriso', 'musculatura' e 'estilo' admir√°veis?", options: ["Pedro Bouhid", "Siqueira", "Marcelo Soyer", "O pr√≥prio Henrique"], answer: "Marcelo Soyer", explanation: "Correto. A aprecia√ß√£o est√©tica foi direcionada a Marcelo Soyer, que diplomaticamente agradeceu o elogio, selando um dos raros momentos de paz e admira√ß√£o m√∫tua no grupo.", quote: "28/06/2017 19:43 - Henrique: Que sorriso / Que musculatura / Que estilo / 28/06/2017 19:45 - Marcelo Soyer: Obrigado meu anjo" },
        { question: "Qual frase espec√≠fica Marcelo Soyer usou para descrever o trio de ataque do S√£o Paulo (Nen√™, Hernanes e Pato)?", options: ["'Tr√™s velhos in√∫teis'", "'Um asilo em campo'", "'3 pesos'", "'Time de aposentados'"], answer: "'3 pesos'", explanation: "Correto! Soyer, com sua habitual delicadeza anal√≠tica, resumiu a frente de ataque do S√£o Paulo como '3 pesos'. Uma s√≠ntese brutal e, sejamos honestos, precisa.", quote: "29/05/2019 23:22 - Marcelo Soyer: Cara... nen√™ Hernanes e pato 3 pesos Hahahahaha sp deprimente" },
        { question: "Quem foi o alvo principal da insistente pergunta 'pq vc nao tora mais henrique?'", options: ["Jo√£o Pedro", "Henrique", "Tacio", "O pr√≥prio Jilson"], answer: "Henrique", explanation: "Henrique, o questionado. A pergunta que ecoou pelo grupo foi uma investiga√ß√£o profunda sobre sua vida amorosa, para a qual ele respondeu com uma confian√ßa inabal√°vel: 'Creio que se eu quiser eu toro'.", quote: "28/07/2018 16:30 - Jilson Brasil: pq vc nao tora mais henrique?" },
        { question: "Durante o grande debate sobre o nome do grupo, qual foi a teoria de Siqueira para o aumento dos conflitos?", options: ["A crise econ√¥mica.", "A falta de jogos de futebol.", "A mudan√ßa do nome para 'Ana Paula tinder' trouxe disc√≥rdia.", "A influ√™ncia da pol√≠tica."], answer: "A mudan√ßa do nome para 'Ana Paula tinder' trouxe disc√≥rdia.", explanation: "Siqueira, o soci√≥logo do grupo, apontou que a mudan√ßa do nome para 'Ana Paula tinder' foi o catalisador do caos. Aparentemente, a estabilidade do grupo √© mais fr√°gil do que imagin√°vamos.", quote: "28/08/2018 12:49 - Siqueira: Depois que mudaram o nome para Ana Paula tinder, a disc√≥rdia aumentou. Voltem para amigos" },
        { question: "Quem foi o primeiro a compartilhar um link para um 'grupo de imitar moto', iniciando uma obsess√£o coletiva?", options: ["Lucas Moraes", "Carlos Bouhid", "Jilson Brasil", "Potenciano"], answer: "Jilson Brasil", explanation: "Jilson Brasil foi o paciente zero da febre da imita√ß√£o de motos. Um simples link foi o suficiente para desencadear uma pandemia de 'vrum vrum' e 'randandandan' que mudou o grupo para sempre.", quote: "22/10/2019 22:13 - Jilson Brasil: https://chat.whatsapp.com/Dbu5sSmhNKgFBfggxbQkqx" },
        { question: "No roteiro sat√≠rico de Jilson para uma festa, o que acontece √†s 19:19h?", options: ["Come√ßa o karaok√™ de sofr√™ncia.", "O aniversariante √© jogado na piscina.", "O amigo que ia embora mais cedo cai na piscina.", "An√∫ncio: 'Cabou cerveja mo√ßada, passa a grana'."], answer: "An√∫ncio: 'Cabou cerveja mo√ßada, passa a grana'.", explanation: "Jilson, nosso cronista do apocalipse social, previu com precis√£o o momento fat√≠dico de toda festa: o an√∫ncio de que a fonte secou. Uma verdade universal.", quote: "28/09/2017 12:45 - Jilson Brasil: [roteiro] 19:19 h - Pausa no som, an√∫ncio: ‚ÄúCabou cerveja mo√ßada, passa a grana‚Äù" },
        { question: "Qual membro foi acusado por Carlos Bouhid de ter um 'fetiche em ser xingado'?", options: ["Lucas Moraes", "Matheus", "Marcelo Soyer", "Siqueira"], answer: "Siqueira", explanation: "Siqueira, o masoquista emocional. Carlos Bouhid, em um momento de brilhantismo psicol√≥gico, diagnosticou o fetiche de Siqueira por ser o centro das aten√ß√µes, mesmo que de forma negativa.", quote: "15/03/2019 12:35 - Carlos Bouhid: Siqueira tem um fetiche em ser xingado... Gosta que falam mal dele, gosta que odeiam o time dele. N√£o sei." },
        { question: "Na 'Tabela Internacional de Gradua√ß√£o de Macho', o que classifica um homem como 'BICHONA LOUCA'?", options: ["Fazer Pilates.", "Beber caipifruta.", "Fazer trilha ou patina√ß√£o no gelo com short de lycra.", "Pedir a√ßa√≠ com ado√ßante."], answer: "Fazer trilha ou patina√ß√£o no gelo com short de lycra.", explanation: "Segundo o antigo e sagrado texto, o √°pice da 'n√£o-macheza' √© alcan√ßado ao combinar esportes de inverno com vestimentas justas. Um crit√©rio claro e inquestion√°vel.", quote: "01/03/2019 12:08 - Carlos Bouhid: Trilha e Patina√ß√£o no Gelo (com short de lycra ou bermudinha jeans desfiada) - BICHONA LOUCA" },
        { question: "Quem foi o respons√°vel por mudar o nome do grupo para 'Ana Paula tinder', causando uma pequena crise institucional?", options: ["Tacio", "Henrique", "Matheus", "Potenciano"], answer: "Matheus", explanation: "Matheus foi o autor do ato de insurrei√ß√£o que quase desestabilizou a rep√∫blica. Um nome, uma crise. Simples assim.", quote: "28/08/2018 12:48 - ‚ÄéMatheus mudou o nome do grupo para 'Ana Paula tinder'" },
        { question: "Qual evento no 'Amistoso do Fernando' deu in√≠cio a uma das primeiras grandes discuss√µes registradas?", options: ["O gol de bicicleta do Livinho.", "A atua√ß√£o de Victor Andrade no gol.", "T√∫lio Maravilha lan√ßando o 'mil gol zito' no microfone.", "A presen√ßa do promoter 'Carl√£o da Villa Mix'."], answer: "T√∫lio Maravilha lan√ßando o 'mil gol zito' no microfone.", explanation: "O 'mil gol zito' de T√∫lio Maravilha foi o Big Bang de muitas das nossas discuss√µes futebol√≠sticas. Um momento t√£o ic√¥nico que merecia est√°tua no lugar do Cristo Redentor, segundo Bouhid.", quote: "26/06/2017 18:24 - Marcelo Soyer: Tulio maravilha pegou o microfone do estadio E lan√ßou o 'mil gol zito'" },
        { question: "Durante a pandemia, qual 'conselho' Potenciano deu para lidar com dinheiro supostamente contaminado?", options: ["Lavar as notas com √°lcool em gel.", "Colocar as notas num envelope para ele recolher 'gratuitamente'.", "Gastar tudo em compras online.", "Depositar tudo no banco."], answer: "Colocar as notas num envelope para ele recolher 'gratuitamente'.", explanation: "Potenciano, sempre pensando no bem-estar financeiro... dos outros, ofereceu um servi√ßo de desinfec√ß√£o monet√°ria gratuita. Um filantropo incompreendido.", quote: "19/03/2020 12:35 - Potenciano: [...] pode deixar em um envelope na porta que eu passo recolhendo gratuitamente" }
    ];

    const topicsData = [
         {
            title: "A Grande Especula√ß√£o do Villa Mix: Uma Trag√©dia Econ√¥mica",
            analysis: "A saga de Lucas Moraes e seu ingresso √© um estudo de caso sobre o capitalismo de compadrio que rege este grupo. Assistimos √† transforma√ß√£o de um jovem esperan√ßoso em um capitalista relutante, for√ßado a navegar nas √°guas turvas da 'pesquisa de mercado' do Facebook. A quest√£o nunca foi ajudar, mas sim participar ativamente da narrativa do problema, preferencialmente adicionando uma camada de rid√≠culo ao processo. O √°pice foi a venda bem-sucedida, provando que, √†s vezes, a especula√ß√£o compensa.",
            quotes: [
                "27/06/2017 12:46 - Lucas Moraes: Quero vender. Algu√©m me ajuda?",
                "27/06/2017 13:18 - Lucas Moraes: Ap√≥s levantar o pre√ßo no facebook, tentarei vender o meu por R$1000,00",
                "29/06/2017 16:49 - Lucas Moraes: 950,00"
            ]
        },
        {
            title: "O Cl√°ssico Eterno: Confian√ßa Inabal√°vel (e Infundada) no Futebol",
            analysis: "O discurso futebol√≠stico aqui opera em um plano de paix√£o descolado da realidade. As discuss√µes n√£o s√£o sobre t√°tica; s√£o rituais de identidade tribal. Mitos, como o evangelho de que 'Canhoto n√£o sabe bater p√™nalti', s√£o defendidos com fervor religioso, mesmo quando a realidade insiste em provar o contr√°rio. Vencer uma discuss√£o no grupo parece, por vezes, mais importante do que a vit√≥ria do pr√≥prio time.",
            quotes: [
                "05/11/2017 17:39 - Carlos Bouhid: Canhoto batendo p√™nalti. E agora?",
                "06/07/2018 16:55 - Tacio: Pipoqueiro fdp",
                "02/10/2019 23:23 - Henrique: Gr√™mio sem esp√≠rito esportivo. Filipe ca√≠do e n√£o tiraram a bola"
            ]
        }
    ];
    
    const achievementsData = [
        { icon: 'üèÜ', title: "Pr√™mio Empreendedor do Ano", member: "Lucas Moraes", reason: "Pela magistral opera√ß√£o de venda de um ingresso do Villa Mix, transformando p√¢nico em lucro e provando que a especula√ß√£o √© a alma do neg√≥cio." },
        { icon: 'üéñÔ∏è', title: "Medalha de Honra Intestinal", member: "Henrique", reason: "Pela coragem e transpar√™ncia ao admitir uma 'leve borrada' em campo. Um ato de bravura que jamais ser√° esquecido (ou deixado em paz)." },
        { icon: 'üìú', title: "Trof√©u de Paci√™ncia Infinita", member: "Carlos Bouhid", reason: "Por sua incans√°vel cruzada para provar teorias estat√≠sticas sobre p√™naltis para uma audi√™ncia que prefere acreditar em astrologia." },
        { icon: 'üëë', title: "Ordem do Caos Instaurado", member: "Matheus", reason: "Por quase derrubar a rep√∫blica ao mudar o nome do grupo para 'Ana Paula tinder', causando uma crise institucional sem precedentes." },
        { icon: 'üèçÔ∏è', title: "Certificado de Mestre das Onomatopeias", member: "Jilson Brasil", reason: "Por ser o paciente zero da pandemia de 'imitar moto', elevando o 'randandandan' a uma forma de arte e unindo o grupo em uma obsess√£o in√∫til." },
        { icon: '‚ù§Ô∏è‚Äçü©π', title: "Pr√™mio Nobel do Fetiche", member: "Siqueira", reason: "Pela sua dedica√ß√£o em ser o para-raios do grupo, provando que a aten√ß√£o, mesmo que negativa, √© uma forma de amor. Ou algo assim." }
    ];

    const wordData = { /* ... Word data from previous version ... */ };

    // --- QUIZ LOGIC WITH NAVIGATION ---
    const quizContainer = document.getElementById('quiz-container');
    let currentQuestionIndex = 0;
    let userAnswers = new Array(quizData.length).fill(null);

    function renderQuiz() {
        const q = quizData[currentQuestionIndex];
        const userAnswer = userAnswers[currentQuestionIndex];
        
        let optionsHtml = q.options.map(option => {
            let buttonClass = 'quiz-option w-full text-left p-4 bg-stone-100 rounded-lg border-2 border-stone-200 hover:border-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-300';
            if (userAnswer !== null) {
                if (option === q.answer) {
                    buttonClass += ' correct';
                } else if (option === userAnswer.selected) {
                    buttonClass += ' selected-wrong';
                }
            }
            return `<button class="${buttonClass}" ${userAnswer !== null ? 'disabled' : ''}>${option}</button>`;
        }).join('');

        let feedbackHtml = '';
        if (userAnswer !== null) {
            const isCorrect = userAnswer.isCorrect;
            feedbackHtml = `
                <div class="p-6 rounded-lg ${isCorrect ? 'bg-green-50' : 'bg-red-50'} border ${isCorrect ? 'border-green-200' : 'border-red-200'} mt-6">
                    <h4 class="font-bold text-lg mb-2">${isCorrect ? 'Acertou, miser√°vel!' : 'Errou, seu herege!'}</h4>
                    <p class="text-zinc-700 mb-4">${q.explanation}</p>
                    <div class="bg-white p-3 rounded-md text-left text-sm italic border-l-4 ${isCorrect ? 'border-green-400' : 'border-red-400'}">
                        <strong>A prova do crime:</strong> "${q.quote}"
                    </div>
                </div>`;
        }
        
        const answeredCount = userAnswers.filter(a => a !== null).length;

        quizContainer.innerHTML = `
            <div id="question-content">
                <p class="text-xl font-bold text-zinc-800 mb-6">${currentQuestionIndex + 1}. ${q.question}</p>
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">${optionsHtml}</div>
                <div id="feedback-container">${feedbackHtml}</div>
            </div>
            <div id="quiz-navigation" class="mt-8 pt-6 border-t border-stone-200 flex flex-col sm:flex-row justify-between items-center gap-4">
                <button id="prev-btn" class="nav-btn w-full sm:w-auto bg-zinc-300 text-zinc-800 font-bold py-2 px-6 rounded-lg hover:bg-zinc-400 transition-colors" ${currentQuestionIndex === 0 ? 'disabled' : ''}>Anterior</button>
                <select id="question-select" class="w-full sm:w-auto bg-white border border-stone-300 rounded-lg p-2 text-center">
                    ${quizData.map((_, i) => `<option value="${i}" ${i === currentQuestionIndex ? 'selected' : ''}>Pergunta ${i + 1}</option>`).join('')}
                </select>
                <button id="next-btn" class="nav-btn w-full sm:w-auto bg-zinc-300 text-zinc-800 font-bold py-2 px-6 rounded-lg hover:bg-zinc-400 transition-colors" ${currentQuestionIndex === quizData.length - 1 ? 'disabled' : ''}>Pr√≥xima</button>
            </div>
            <div class="mt-6 text-center">
                 <p class="text-sm text-zinc-500 mb-2">${answeredCount} de ${quizData.length} respondidas</p>
                 <button id="finish-quiz-btn" class="w-full sm:w-auto bg-amber-500 text-white font-bold py-3 px-10 rounded-lg hover:bg-amber-600 transition-colors ${answeredCount < quizData.length ? 'opacity-50 cursor-not-allowed' : ''}" ${answeredCount < quizData.length ? 'disabled' : ''}>Ver Resultado Final</button>
            </div>
        `;

        document.getElementById('options-container').addEventListener('click', e => {
            if (e.target.classList.contains('quiz-option') && userAnswers[currentQuestionIndex] === null) {
                checkAnswer(e.target);
            }
        });
        
        document.getElementById('prev-btn').addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuiz();
            }
        });

        document.getElementById('next-btn').addEventListener('click', () => {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                renderQuiz();
            }
        });
        
        document.getElementById('question-select').addEventListener('change', e => {
            currentQuestionIndex = parseInt(e.target.value);
            renderQuiz();
        });

        document.getElementById('finish-quiz-btn').addEventListener('click', renderResults);
    }

    function checkAnswer(selectedOption) {
        const selectedAnswer = selectedOption.textContent.trim();
        const correctAnswer = quizData[currentQuestionIndex].answer;
        const isCorrect = selectedAnswer === correctAnswer;
        userAnswers[currentQuestionIndex] = { selected: selectedAnswer, isCorrect: isCorrect };
        renderQuiz(); // Re-render to show feedback and disable options
    }

    function renderResults() {
        const score = userAnswers.filter(a => a && a.isCorrect).length;
        let title, message, bgColor, textColor, personalityType;

        if (score <= 6) {
            personalityType = "O Renegado";
            title = `Voc√™ acertou ${score}/15. Est√° oficialmente expulso.`;
            message = "Sua performance foi t√£o decepcionante que nem a 'Confraterniza√ß√£o dos Renegados' te aceitaria. Voc√™ parece n√£o prestar aten√ß√£o em nada, provavelmente passa o dia respondendo 'kkk' sem ler. Sua mem√≥ria para fofocas √© nula, um pecado capital neste grupo. Adeus.";
            bgColor = 'bg-red-100'; textColor = 'text-red-800';
        } else if (score <= 10) {
            personalityType = "O Membro Figurante";
            title = `Voc√™ acertou ${score}/15. Sobreviveu... por enquanto.`;
            message = "Voc√™ faz o m√≠nimo para se manter no grupo. Sabe o b√°sico: a 'borrada' do Henrique, a saga do ingresso do Lucas. Mas os detalhes mais sutis, as nuances do caos, lhe escapam. Voc√™ √© o coadjuvante que aplaude as piadas, mas raramente as cria. Melhore, ou a pr√≥xima limpa pode te levar.";
            bgColor = 'bg-yellow-100'; textColor = 'text-yellow-800';
        } else if (score <= 14) {
            personalityType = "O Historiador do Caos";
            title = `Impressionantes ${score}/15 acertos! Voc√™ √© da elite.`;
            message = "Voc√™ n√£o apenas sobrevive, voc√™ prospera no caos. Sua mem√≥ria √© uma arma, registrando cada gafe, cada teoria, cada momento de vergonha alheia. Voc√™ provavelmente tem um arquivo pessoal com prints comprometedores. Voc√™ √© essencial para manter a mitologia do grupo viva. Respeito.";
            bgColor = 'bg-blue-100'; textColor = 'text-blue-800';
        } else { // score == 15
            personalityType = "O Dono do Grupo (N√£o-Oficial)";
            title = `Gabaritou! 15/15! Voc√™ √© uma lenda!`;
            message = "N√£o h√° outra explica√ß√£o: voc√™ √© o observador onisciente, o mestre dos fantoches, o c√©rebro por tr√°s de tudo. Sua aten√ß√£o aos detalhes √© t√£o assustadora que suspeitamos que voc√™ tenha menos vida social do que um monge tibetano. Voc√™ n√£o est√° no grupo; o grupo est√° em voc√™. Pegue a coroa, ela √© sua.";
            bgColor = 'bg-green-100'; textColor = 'text-green-800';
        }

        quizContainer.innerHTML = `
            <div class="${bgColor} ${textColor} p-8 rounded-lg text-center transition-all duration-500">
                <span class="font-bold text-sm block mb-2">${personalityType}</span>
                <h3 class="text-3xl font-black mb-4">${title}</h3>
                <p class="text-lg">${message}</p>
                <button id="restart-quiz" class="mt-8 bg-zinc-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-zinc-700 transition-colors">Tentar Novamente</button>
            </div>
        `;
        document.getElementById('restart-quiz').addEventListener('click', () => {
            currentQuestionIndex = 0;
            userAnswers.fill(null);
            renderQuiz();
        });
    }

    // --- ACHIEVEMENTS LOGIC ---
    const achievementsContainer = document.getElementById('achievements-container');
    achievementsContainer.innerHTML = achievementsData.map(ach => `
        <div class="bg-white p-6 rounded-2xl shadow-lg text-center flex flex-col items-center hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
            <div class="text-5xl mb-4">${ach.icon}</div>
            <h4 class="text-xl font-bold text-amber-600">${ach.title}</h4>
            <p class="text-md font-semibold text-zinc-700 mt-1">${ach.member}</p>
            <p class="text-zinc-600 mt-3 text-sm flex-grow">${ach.reason}</p>
        </div>
    `).join('');

    // ... (rest of the script: topics, word cloud, race chart, etc., remains the same)

    const topicsContainer = document.getElementById('topics-container');
    topicsContainer.innerHTML = topicsData.map(topic => `
        <details class="bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-300">
            <summary class="p-6 cursor-pointer flex justify-between items-center hover:bg-stone-50">
                <h4 class="text-xl font-bold text-zinc-800">${topic.title}</h4>
                <div class="arrow-down transition-transform duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                </div>
            </summary>
            <div class="px-6 pb-6">
                <p class="text-zinc-600 mb-4">${topic.analysis}</p>
                <div class="bg-stone-100 p-4 rounded-lg border-l-4 border-amber-400">
                    <h5 class="font-bold mb-2 text-zinc-700">Cofre de Evid√™ncias:</h5>
                    <div class="text-sm text-zinc-700 space-y-2">
                        ${topic.quotes.map(q => `<blockquote class="pl-3 border-l-2 border-stone-300">&ldquo;${q}&rdquo;</blockquote>`).join('')}
                    </div>
                </div>
            </div>
        </details>
    `).join('');
    
    // WORD CLOUD & RACE CHART LOGIC (UNCHANGED)
    const wordCloudContainer = document.getElementById('word-cloud-container');
    const wordCloudControls = document.getElementById('word-cloud-controls');
    let allWords = [];
    Object.values(wordData).forEach(monthWords => {
        monthWords.forEach(wordObj => {
            const existingWord = allWords.find(w => w.word === wordObj.word);
            if (existingWord) {
                existingWord.count += wordObj.count;
            } else {
                allWords.push({ ...wordObj });
            }
        });
    });
    allWords.sort((a, b) => b.count - a.count);

    const monthKeys = ["Acumulado", ...Object.keys(wordData)];
    wordCloudControls.innerHTML = monthKeys.map(key => 
        `<button class="word-filter-btn px-4 py-2 text-sm font-semibold rounded-full bg-stone-200 hover:bg-amber-300" data-month="${key}">${key}</button>`
    ).join('');

    function renderWordCloud(data) {
        wordCloudContainer.innerHTML = '';
        if (!data || data.length === 0) {
            wordCloudContainer.innerHTML = '<p class="text-zinc-500">Nenhum dado para este per√≠odo.</p>';
            return;
        }
        const maxCount = Math.max(...data.map(w => w.count));
        const minCount = Math.min(...data.map(w => w.count));

        data.slice(0, 30).forEach(wordObj => { 
            const el = document.createElement('span');
            const weight = (wordObj.count - minCount) / (maxCount - minCount || 1);
            const fontSize = 0.8 + weight * 2.2; 
            const rotation = (Math.random() * 60) - 30; 
            
            el.textContent = wordObj.word;
            el.style.fontSize = `${fontSize}rem`;
            el.style.fontWeight = 'bold';
            el.style.lineHeight = '1';
            el.style.transform = `rotate(${rotation}deg)`;
            el.classList.add(weight > 0.7 ? 'text-amber-600' : (weight > 0.4 ? 'text-zinc-800' : 'text-zinc-500'));
            wordCloudContainer.appendChild(el);
        });
    }

    wordCloudControls.addEventListener('click', e => {
        if (e.target.classList.contains('word-filter-btn')) {
            const month = e.target.dataset.month;
            document.querySelectorAll('.word-filter-btn').forEach(btn => btn.classList.remove('bg-amber-400', 'text-white'));
            e.target.classList.add('bg-amber-400', 'text-white');
            const dataToRender = (month === "Acumulado") ? allWords : wordData[month];
            renderWordCloud(dataToRender);
        }
    });

    document.querySelector('.word-filter-btn[data-month="Acumulado"]').click();

    const raceCtx = document.getElementById('raceChart').getContext('2d');
    const raceChartDateEl = document.getElementById('race-chart-date');
    let raceChart;
    const raceChartData = {
        "2017-06": {"Villa Mix": 50, "Futebol": 20},
        "2017-11": {"Amigo Secreto": 60, "Futebol": 10},
        "2018-07": {"Copa": 80, "Futebol": 30},
        "2018-08": {"Astrologia": 35, "Tinder": 25},
        "2019-10": {"Imitar Moto": 90, "Xaropinho": 40},
        "2020-03": {"Crise Corona": 60, "Envelope": 30}
    };
    const raceTimeline = Object.keys(raceChartData);
    let currentRaceIndex = 0;
    let cumulativeData = {};
    const allTopics = [...new Set(Object.values(raceChartData).flatMap(obj => Object.keys(obj)))];
    allTopics.forEach(t => cumulativeData[t] = 0);

    function updateRaceChart() {
        if (currentRaceIndex >= raceTimeline.length) {
             currentRaceIndex = 0; 
             allTopics.forEach(t => cumulativeData[t] = 0);
        }
        const currentDateKey = raceTimeline[currentRaceIndex];
        const monthData = raceChartData[currentDateKey];
        Object.keys(monthData).forEach(topic => {
            cumulativeData[topic] = (cumulativeData[topic] || 0) + monthData[topic];
        });
        const sortedData = Object.entries(cumulativeData).sort(([,a],[,b]) => b-a).slice(0, 10);
        const labels = sortedData.map(item => item[0]);
        const data = sortedData.map(item => item[1]);
        raceChartDateEl.textContent = `Situa√ß√£o em: ${currentDateKey}`;
        const backgroundColors = ['rgba(245, 158, 11, 0.8)', 'rgba(120, 113, 108, 0.8)', 'rgba(239, 68, 68, 0.8)','rgba(59, 130, 246, 0.8)', 'rgba(34, 197, 94, 0.8)', 'rgba(139, 92, 246, 0.8)'];
        if (!raceChart) {
            raceChart = new Chart(raceCtx, {
                type: 'bar',
                data: { labels: labels, datasets: [{ label: 'Frequ√™ncia Acumulada do T√≥pico', data: data, backgroundColor: labels.map((_, i) => backgroundColors[i % backgroundColors.length]), borderWidth: 0 }] },
                options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { beginAtZero: true, grid: { display: false } }, y: { grid: { color: 'rgba(0,0,0,0.05)' } } }, animation: { duration: 1200, easing: 'easeInOutCubic' } }
            });
        } else {
            raceChart.data.labels = labels;
            raceChart.data.datasets[0].data = data;
            raceChart.data.datasets[0].backgroundColor = labels.map((_, i) => backgroundColors[i % backgroundColors.length]);
            raceChart.update();
        }
        currentRaceIndex++;
    }
    setInterval(updateRaceChart, 2500);
    updateRaceChart();

    // Initial render
    renderQuiz();
});
</script>
</body>
</html>
